From 4154ec1682c15a76f9fcdd0b6b7cc36e7b2cb49e Mon Sep 17 00:00:00 2001
From: Tabakhase <github@tabakhase.com>
Date: Sun, 30 Aug 2020 20:14:02 +0200
Subject: [PATCH] add Dockerfile

---
 .dockerignore | 54 +++++++++++++++++++++++++++++++++++++++++++++++++++
 .gitignore    |  4 ++++
 Dockerfile    | 12 ++++++++++++
 nginx.conf    | 16 +++++++++++++++
 4 files changed, 86 insertions(+)
 create mode 100644 .dockerignore
 create mode 100644 Dockerfile
 create mode 100644 nginx.conf

diff --git a/.dockerignore b/.dockerignore
new file mode 100644
index 0000000..79e21a8
--- /dev/null
+++ b/.dockerignore
@@ -0,0 +1,54 @@
+# See http://help.github.com/ignore-files/ for more about ignoring files.
+
+# compiled output
+/dist
+/tmp
+/out-tsc
+# Only exists if Bazel was run
+/bazel-out
+
+# dependencies
+/node_modules
+
+# profiling files
+chrome-profiler-events*.json
+speed-measure-plugin*.json
+
+# IDEs and editors
+/.idea
+.project
+.classpath
+.c9/
+*.launch
+.settings/
+*.sublime-workspace
+
+# IDE - VSCode
+.vscode/*
+!.vscode/settings.json
+!.vscode/tasks.json
+!.vscode/launch.json
+!.vscode/extensions.json
+.history/*
+
+# misc
+/.sass-cache
+/connect.lock
+/coverage
+/libpeerconnection.log
+npm-debug.log
+yarn-error.log
+testem.log
+/typings
+
+# System Files
+.DS_Store
+Thumbs.db
+
+# Docker Related
+/docker-compose.yml
+/docker-compose.override.yml
+/.env
+
+# Version Control
+/.git
diff --git a/.gitignore b/.gitignore
index 86d943a..dc4d62e 100644
--- a/.gitignore
+++ b/.gitignore
@@ -44,3 +44,7 @@ testem.log
 # System Files
 .DS_Store
 Thumbs.db
+
+# Docker Related
+/docker-compose.override.yml
+/.env
diff --git a/Dockerfile b/Dockerfile
new file mode 100644
index 0000000..bfd3e1e
--- /dev/null
+++ b/Dockerfile
@@ -0,0 +1,12 @@
+### STAGE 1 - builder ###
+FROM node:14.9-alpine AS builder
+WORKDIR /usr/src/app
+COPY package.json package-lock.json ./
+RUN npm install
+COPY . .
+RUN npm run build
+
+### STAGE 1 - final ###
+FROM nginx:1.18.0
+COPY nginx.conf /etc/nginx/nginx.conf
+COPY --from=builder /usr/src/app/dist/waffle-air /usr/share/nginx/html
diff --git a/nginx.conf b/nginx.conf
new file mode 100644
index 0000000..b2e9c9a
--- /dev/null
+++ b/nginx.conf
@@ -0,0 +1,16 @@
+
+events{}
+
+http {
+    include /etc/nginx/mime.types;
+
+    server {
+        listen 80;
+        server_name localhost;
+        root /usr/share/nginx/html;
+        index index.html;
+        location / {
+            try_files $uri $uri/ /index.html;
+        }
+    }
+}
-- 
2.22.0.windows.1

